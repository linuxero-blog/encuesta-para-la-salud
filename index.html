<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Panel de An√°lisis de Encuesta de Salud</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f6f9;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        
        .dashboard {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .chart-container {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        canvas {
            max-height: 300px;
        }
        
        .chart-title {
            text-align: center;
            margin-bottom: 15px;
            color: #34495e;
        }
        
        .prevencion-container {
            margin-top: 40px;
            padding: 20px;
        }
        
        .section-title {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: bold;
        }
        
        .prevencion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .prevencion-card {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }
        
        .prevencion-card:hover {
            transform: translateY(-5px);
        }
        
        .prevencion-card h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 20px;
            text-align: center;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }
        
        .prevencion-card ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        
        .prevencion-card ul li {
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
            color: #555;
            line-height: 1.5;
        }
        
        .prevencion-card ul li:last-child {
            border-bottom: none;
        }
        
        .prevencion-card strong {
            color: #2c3e50;
            font-weight: 600;
        }
        
        .nested-list {
            margin-left: 20px !important;
            margin-top: 5px;
            font-size: 0.95em;
        }
        
        .nested-list li {
            padding: 5px 0 !important;
            border-bottom: none !important;
            color: #666 !important;
        }
        
        @media (max-width: 768px) {
            .prevencion-grid {
                grid-template-columns: 1fr;
            }
            .prevencion-card {
                padding: 20px;
            }
        }
        
        .prevencion-card .nested-list li:before {
            content: "‚Ä¢";
            color: #3498db;
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }
        
        .prevencion-card:nth-child(odd) {
            background-color: #f8f9fa;
        }
        
        .prevencion-card:nth-child(even) {
            background-color: #ffffff;
        }
        
        .prevencion-card strong {
            color: #2c3e50;
            font-weight: 600;
            display: block;
            margin-top: 10px;
        }
        
        .prevencion-card h3:before {
            margin-right: 8px;
        }
        
        @media (max-width: 480px) {
            .prevencion-card {
                padding: 15px;
            }
            .prevencion-card h3 {
                font-size: 18px;
            }
            .nested-list {
                margin-left: 15px !important;
            }
        }
        
        @media (min-width: 1200px) {
            .prevencion-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>

<body>
    <div class="dashboard">
        <h1>üìä Panel de An√°lisis de Encuesta de Salud</h1>
        <div class="chart-grid" id="chartContainer"></div>

        <!-- Secci√≥n expandida de promoci√≥n, prevenci√≥n y epidemiolog√≠a -->
        <div class="prevencion-container">
            <h2 class="section-title">Promoci√≥n, Prevenci√≥n y Epidemiolog√≠a</h2>
            <div class="prevencion-grid">
                <div class="prevencion-card">
                    <h3>ü¶† Prevenci√≥n de Enfermedades</h3>
                    <ul>
                        <li><strong>Prevenci√≥n Primaria:</strong> Vacunaci√≥n, educaci√≥n sanitaria</li>
                        <li><strong>Prevenci√≥n Secundaria:</strong> Detecci√≥n temprana, tamizajes</li>
                        <li><strong>Prevenci√≥n Terciaria:</strong> Rehabilitaci√≥n, control de complicaciones</li>
                        <li><strong>Prevenci√≥n Cuaternaria:</strong> Evitar intervenciones innecesarias</li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üìä Indicadores Epidemiol√≥gicos</h3>
                    <ul>
                        <li><strong>Prevalencia:</strong> Casos totales en un momento dado</li>
                        <li><strong>Incidencia:</strong> Casos nuevos en un per√≠odo</li>
                        <li><strong>Morbilidad:</strong> Frecuencia de enfermedad</li>
                        <li><strong>Mortalidad:</strong> Frecuencia de muertes</li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üè• Diagn√≥stico y Tratamiento</h3>
                    <ul>
                        <li><strong>Dx Disponibles:</strong>
                            <ul class="nested-list">
                                <li>Pruebas de laboratorio</li>
                                <li>Estudios de imagen</li>
                                <li>Evaluaci√≥n cl√≠nica</li>
                            </ul>
                        </li>
                        <li><strong>Tx Disponibles:</strong>
                            <ul class="nested-list">
                                <li>Farmacol√≥gico</li>
                                <li>Quir√∫rgico</li>
                                <li>Terap√©utico</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>‚è≥ Per√≠odos de Enfermedad</h3>
                    <ul>
                        <li><strong>Per√≠odo Latente:</strong> Sin s√≠ntomas detectables</li>
                        <li><strong>Per√≠odo Prodr√≥mico:</strong> S√≠ntomas iniciales</li>
                        <li><strong>Per√≠odo Cl√≠nico:</strong> Manifestaci√≥n completa</li>
                        <li><strong>Per√≠odo Convalecencia:</strong> Recuperaci√≥n</li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üîç Factores de Riesgo</h3>
                    <ul>
                        <li><strong>Modificables:</strong>
                            <ul class="nested-list">
                                <li>Tabaquismo</li>
                                <li>Sedentarismo</li>
                                <li>Dieta inadecuada</li>
                            </ul>
                        </li>
                        <li><strong>No Modificables:</strong>
                            <ul class="nested-list">
                                <li>Edad</li>
                                <li>G√©nero</li>
                                <li>Gen√©tica</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üìà Vigilancia Epidemiol√≥gica</h3>
                    <ul>
                        <li><strong>Sistemas de Vigilancia:</strong>
                            <ul class="nested-list">
                                <li>Notificaci√≥n obligatoria</li>
                                <li>Monitoreo continuo</li>
                                <li>Investigaci√≥n de brotes</li>
                            </ul>
                        </li>
                        <li><strong>Acciones:</strong>
                            <ul class="nested-list">
                                <li>Control de casos</li>
                                <li>Seguimiento de contactos</li>
                                <li>Medidas preventivas</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üß¨ Determinantes de Salud</h3>
                    <ul>
                        <li><strong>Biol√≥gicos:</strong>
                            <ul class="nested-list">
                                <li>Gen√©tica y herencia</li>
                                <li>Sistema inmunol√≥gico</li>
                                <li>Edad y desarrollo</li>
                            </ul>
                        </li>
                        <li><strong>Ambientales:</strong>
                            <ul class="nested-list">
                                <li>Calidad del aire</li>
                                <li>Acceso a agua potable</li>
                                <li>Condiciones de vivienda</li>
                            </ul>
                        </li>
                        <li><strong>Sociales:</strong>
                            <ul class="nested-list">
                                <li>Nivel educativo</li>
                                <li>Ingresos econ√≥micos</li>
                                <li>Acceso a servicios de salud</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üèÉ‚Äç‚ôÇÔ∏è Estilos de Vida Saludables</h3>
                    <ul>
                        <li><strong>Actividad F√≠sica:</strong>
                            <ul class="nested-list">
                                <li>30 minutos diarios m√≠nimo</li>
                                <li>Ejercicio aer√≥bico regular</li>
                                <li>Fortalecimiento muscular</li>
                            </ul>
                        </li>
                        <li><strong>Alimentaci√≥n:</strong>
                            <ul class="nested-list">
                                <li>Dieta balanceada</li>
                                <li>Control de porciones</li>
                                <li>Hidrataci√≥n adecuada</li>
                            </ul>
                        </li>
                        <li><strong>Descanso:</strong>
                            <ul class="nested-list">
                                <li>7-8 horas de sue√±o</li>
                                <li>Manejo del estr√©s</li>
                                <li>Pausas activas</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üî¨ Investigaci√≥n Epidemiol√≥gica</h3>
                    <ul>
                        <li><strong>Tipos de Estudios:</strong>
                            <ul class="nested-list">
                                <li>Casos y controles</li>
                                <li>Cohortes</li>
                                <li>Transversales</li>
                                <li>Ensayos cl√≠nicos</li>
                            </ul>
                        </li>
                        <li><strong>Metodolog√≠a:</strong>
                            <ul class="nested-list">
                                <li>Recolecci√≥n de datos</li>
                                <li>An√°lisis estad√≠stico</li>
                                <li>Interpretaci√≥n de resultados</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üåç Salud Global</h3>
                    <ul>
                        <li><strong>Desaf√≠os Actuales:</strong>
                            <ul class="nested-list">
                                <li>Enfermedades emergentes</li>
                                <li>Resistencia antimicrobiana</li>
                                <li>Cambio clim√°tico y salud</li>
                            </ul>
                        </li>
                        <li><strong>Cooperaci√≥n Internacional:</strong>
                            <ul class="nested-list">
                                <li>Programas de vacunaci√≥n</li>
                                <li>Control de pandemias</li>
                                <li>Investigaci√≥n colaborativa</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üì± Tecnolog√≠a en Salud</h3>
                    <ul>
                        <li><strong>Telemedicina:</strong>
                            <ul class="nested-list">
                                <li>Consultas virtuales</li>
                                <li>Monitoreo remoto</li>
                                <li>Apps de salud</li>
                            </ul>
                        </li>
                        <li><strong>Innovaciones:</strong>
                            <ul class="nested-list">
                                <li>Inteligencia artificial</li>
                                <li>Dispositivos m√©dicos</li>
                                <li>An√°lisis de big data</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üéØ Grupos de Riesgo</h3>
                    <ul>
                        <li><strong>Poblaci√≥n Vulnerable:</strong>
                            <ul class="nested-list">
                                <li>Adultos mayores</li>
                                <li>Ni√±os menores de 5 a√±os</li>
                                <li>Embarazadas</li>
                                <li>Inmunodeprimidos</li>
                            </ul>
                        </li>
                        <li><strong>Intervenciones Espec√≠ficas:</strong>
                            <ul class="nested-list">
                                <li>Programas de vacunaci√≥n</li>
                                <li>Controles peri√≥dicos</li>
                                <li>Educaci√≥n focalizada</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üåø Medicina Preventiva</h3>
                    <ul>
                        <li><strong>Estrategias:</strong>
                            <ul class="nested-list">
                                <li>Chequeos regulares</li>
                                <li>Screening poblacional</li>
                                <li>Consejer√≠a en salud</li>
                            </ul>
                        </li>
                        <li><strong>√Åreas de Enfoque:</strong>
                            <ul class="nested-list">
                                <li>Salud cardiovascular</li>
                                <li>Salud mental</li>
                                <li>Nutrici√≥n</li>
                                <li>Actividad f√≠sica</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="prevencion-card">
                    <h3>üìã Gesti√≥n Sanitaria</h3>
                    <ul>
                        <li><strong>Planificaci√≥n:</strong>
                            <ul class="nested-list">
                                <li>Programas de salud</li>
                                <li>Asignaci√≥n de recursos</li>
                                <li>Evaluaci√≥n de impacto</li>
                            </ul>
                        </li>
                        <li><strong>Indicadores:</strong>
                            <ul class="nested-list">
                                <li>Cobertura sanitaria</li>
                                <li>Eficiencia de servicios</li>
                                <li>Satisfacci√≥n usuarios</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuraci√≥n de colores
        const colorPalette = [
            '#3498db', '#2ecc71', '#e74c3c', '#f39c12',
            '#9b59b6', '#1abc9c', '#34495e', '#16a085'
        ];

        // Funci√≥n para crear un gr√°fico
        function createChart(ctx, title, labels, data) {
            return new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colorPalette.slice(0, labels.length)
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: title,
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Funci√≥n para procesar los datos
        function processData(data) {
            const columns = [
                'Que enfermedades son las mas contagiables ?',
                'Cual es la enfermedad infecciosa mas comun en la comunidad ',
                'Cual es la principal via de transmision de la influenza ',
                'Cual es el grupo de edad mas afectado por la tuberculosis ',
                'cual es la enfermedad cronica mas prevalente en la comunidad ',
                'Cual es el principal factor de riesgo para desarollar una enfermedad cardio vascular ',
                'Cual es la enfermedad emergente mas preocupante en la actualidad',
                'Cual es la principal medida de prevencion para evitar la transmicion de COVID19',
                'Cual es el papel de la vigilancia epidemiologica en la detecccion de enfermedades emergentes'
            ];

            const chartContainer = document.getElementById('chartContainer');

            columns.forEach((column, index) => {
                // Contar frecuencia de respuestas
                const responseCounts = data.reduce((acc, row) => {
                    const response = row[column];
                    acc[response] = (acc[response] || 0) + 1;
                    return acc;
                }, {});

                // Crear contenedor para el gr√°fico
                const chartDiv = document.createElement('div');
                chartDiv.className = 'chart-container';

                const canvas = document.createElement('canvas');
                canvas.id = `chart-${index}`;
                chartDiv.appendChild(canvas);

                chartContainer.appendChild(chartDiv);

                // Crear gr√°fico
                const ctx = canvas.getContext('2d');
                createChart(
                    ctx,
                    column.replace('?', ''),
                    Object.keys(responseCounts),
                    Object.values(responseCounts)
                );
            });
        }

        // Cargar y procesar datos
        fetch('unu.csv')
            .then(response => response.text())
            .then(csvText => {
                const parsedData = Papa.parse(csvText, {
                    header: true,
                    skipEmptyLines: true
                }).data;
                processData(parsedData);
            })
            .catch(error => {
                console.error('Error cargando los datos:', error);
                document.getElementById('chartContainer').innerHTML =
                    `<p>Error al cargar los datos: ${error.message}</p>`;
            });
    </script>
</body>

</html>
